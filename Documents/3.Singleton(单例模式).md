# Singleton(单例模式)

单例模式限制了一个类只能有*个实例。对该类的每个引用都是指同一个底层实例。这种模式在iOS应用开发中极为常见，因为苹果公司广泛使用了这种模式。

![img77](https://raw.githubusercontent.com/CainLuo/DesignPatterns/main/Images/img77.png)

"单例"模式也很常见，它提供了一个共享的单例实例，允许其他实例也被创建。

## 你应该在什么时候使用它？

当一个类有一个以上的实例会导致问题时，或者当它不符合逻辑时，就使用单例模式。

如果一个共享的实例在大多数情况下是有用的，但你也想允许创建自定义的实例，那么就使用单体加模式。这方面的一个例子是FileManager，它处理所有与文件系统访问有关的事情。有一个 "默认 "实例，它是一个单例，或者你可以创建你自己的。如果你在后台线程上使用它，你通常会创建自己的。

## 你应该注意什么？

单例模式很容易被过度使用。

如果你遇到了想使用单例的情况，首先要考虑用其他方法来完成你的任务。

例如，如果你只是想把信息从一个视图控制器传递到另一个视图控制器，那么单例就不*合适。相反，考虑通过一个初始化器或属性来传递模型。

如果你确定需要一个单例，考虑一个单例加是否更有意义。

拥有一个以上的实例会不会造成问题？拥有自定义实例是否会有用？你的答案将决定你是使用真正的单例还是单例加的更好。

单例有问题的一个最常见的原因是测试。如果你的状态被存储在一个像单例一样的全局对象中，那么测试的顺序就会很重要，而且模拟它们会很痛苦。这两个原因使测试变得很痛苦。

最后，要注意"代码味道"，它表明你的用例根本不适合作为单例。例如，如果你经常需要许多自定义实例，你的用例作为一个普通对象可能会更好。 
